const bill_of_rights = "For decades, it seemed that the world had learned a lesson from its many wars and disasters, and was slowly moving towards various forms of integration. For example, there was the dream of a united Europe, capable of acknowledging its shared roots and rejoicing in its rich diversity. We think of the firm conviction of the founders of the European Union, who envisioned a future based on the capacity to work together in bridging divisions and in fostering peace and fellowship between all the peoples of this continent. There was also a growing desire for integration in Latin America, and several steps were taken in this direction. In some countries and regions, attempts at reconciliation and rapprochement proved fruitful, while others showed great promise.  Our own days, however, seem to be showing signs of a certain regression. Ancient conflicts thought long buried are breaking out anew, while instances of a myopic, extremist, resentful and aggressive nationalism are on the rise. In some countries, a concept of popular and national unity influenced by various ideologies is creating new forms of selfishness and a loss of the social sense under the guise of defending national interests. Once more we are being reminded that each new generation must take up the struggles and attainments of past generations, while setting its sights even higher. This is the path. Goodness, together with love, justice and solidarity, are not achieved once and for all; they have to be realized each day. It is not possible to settle for what was achieved in the past and complacently enjoy it, as if we could somehow disregard the fact that many of our brothers and sisters still endure situations that cry out for our attention";
const para86 = "I sometimes wonder why, in light of this, it took so long for the Church unequivocally to condemn slavery and various forms of violence. Today, with our developed spirituality and theology, we have no excuses. Still, there are those who appear to feel encouraged or at least permitted by their faith to support varieties of narrow and violent nationalism, xenophobia and contempt, and even the mistreatment of those who are different. Faith, and the humanism it inspires, must maintain a critical sense in the face of these tendencies, and prompt an immediate response whenever they rear their head. For this reason, it is important that catechesis and preaching speak more directly and clearly about the social meaning of existence, the fraternal dimension of spirituality, our conviction of the inalienable dignity of each person, and our reasons for loving and accepting all our brothers and sisters.";
const piusx11 = "Nevertheless, the struggle between good and evil remained in the world as a sad legacy of the original fall. Nor has the ancient tempter ever ceased to deceive mankind with false promises. It is on this account that one convulsion following upon another has marked the passage of the centuries, down to the revolution of our own days. This modern revolution, it may be said, has actually broken out or threatens everywhere, and it exceeds in amplitude and violence anything yet experienced in the preceding persecutions launched against the Church. Entire peoples find themselves in danger of falling back into a barbarism worse than that which oppressed the greater part of the world at the coming of the Redeemer."
const piusx11_2 = "To Our great satisfaction, Venerable Brethren, you have, by means of individual and even joint pastoral Letters, accurately transmitted and explained to the Faithful these admonitions. Yet despite Our frequent and paternal warning the peril only grows greater from day to day because of the pressure exerted by clever agitators. Therefore We believe it to be Our duty to raise Our voice once more, in a still more solemn missive, in accord with the tradition of this Apostolic See, the Teacher of Truth, and in accord with the desire of the whole Catholic world, which makes the appearance of such a document but natural. We trust that the echo of Our voice will reach every mind free from prejudice and every heart sincerely desirous of the good of mankind. We wish this the more because Our words are now receiving sorry confirmation from the spectacle of the bitter fruits of subversive ideas, which We foresaw and foretold, and which are in fact multiplying fearfully in the countries already stricken, or threatening every other country of the world. The Communism of today, more emphatically than similar movements in the past, conceals in itself a false messianic idea. A pseudo-ideal of justice, of equality and fraternity in labor impregnates all its doctrine and activity with a deceptive mysticism, which communicates a zealous and contagious enthusiasm to the multitudes entrapped by delusive promises. This is especially true in an age like ours, when unusual misery has resulted from the unequal distribution of the goods of this world. This pseudo-ideal is even boastfully advanced as if it were responsible for a certain economic progress. As a matter of fact, when such progress is at all real, its true causes are quite different, as for instance the intensification of industrialism in countries which were formerly almost without it, the exploitation of immense natural resources, and the use of the most brutal methods to insure the achievement of gigantic projects with a minimum of expense. The doctrine of modern Communism, which is often concealed under the most seductive trappings, is in substance based on the principles of dialectical and historical materialism previously advocated by Marx, of which the theoricians of bolshevism claim to possess the only genuine interpretation. According to this doctrine there is in the world only one reality, matter, the blind forces of which evolve into plant, animal and man. Even human society is nothing but a phenomenon and form of matter, evolving in the same way. By a law of inexorable necessity and through a perpetual conflict of forces, matter moves towards the final synthesis of a classless society. In such a doctrine, as is evident, there is no room for the idea of God; there is no difference between matter and spirit, between soul and body; there is neither survival of the soul after death nor any hope in a future life. Insisting on the dialectical aspect of their materialism, the Communists claim that the conflict which carries the world towards its final synthesis can be accelerated by man. Hence they endeavor to sharpen the antagonisms which arise between the various classes of society. Thus the class struggle with its consequent violent hate and destruction takes on the aspects of a crusade for the progress of humanity. On the other hand, all other forces whatever, as long as they resist such systematic violence, must be annihilated as hostile to the human race."
const b16  = "The Old Testament firmly opposed this form of religion, which represents a powerful temptation against monotheistic faith, combating it as a perversion of religiosity. But it in no way rejected eros as such; rather, it declared war on a warped and destructive form of it, because this counterfeit divinization of eros actually strips it of its dignity and dehumanizes it. Indeed, the prostitutes in the temple, who had to bestow this divine intoxication, were not treated as human beings and persons, but simply used as a means of arousing “divine madness”: far from being goddesses, they were human persons being exploited. An intoxicated and undisciplined eros, then, is not an ascent in “ecstasy” towards the Divine, but a fall, a degradation of man. Evidently, eros needs to be disciplined and purified if it is to provide not just fleeting pleasure, but a certain foretaste of the pinnacle of our existence, of that beatitude for which our whole being yearns. The Prophets, particularly Hosea and Ezekiel, described God's passion for his people using boldly erotic images. God's relationship with Israel is described using the metaphors of betrothal and marriage; idolatry is thus adultery and prostitution. Here we find a specific reference—as we have seen—to the fertility cults and their abuse of eros, but also a description of the relationship of fidelity between Israel and her God. The history of the love-relationship between God and Israel consists, at the deepest level, in the fact that he gives her the Torah, thereby opening Israel's eyes to man's true nature and showing her the path leading to true humanism. The philosophical dimension to be noted in this biblical vision, and its importance from the standpoint of the history of religions, lies in the fact that on the one hand we find ourselves before a strictly metaphysical image of God: God is the absolute and ultimate source of all being; but this universal principle of creation—the Logos, primordial reason—is at the same time a lover with all the passion of a true love. The first novelty of biblical faith consists, as we have seen, in its image of God. The second, essentially connected to this, is found in the image of man. The biblical account of creation speaks of the solitude of Adam, the first man, and God's decision to give him a helper. Of all other creatures, not one is capable of being the helper that man needs, even though he has assigned a name to all the wild beasts and birds and thus made them fully a part of his life. So God forms woman from the rib of man. Now Adam finds the helper that he needed This principle is the starting-point for understanding the great parables of Jesus. The rich man (cf. Lk 16:19-31) begs from his place of torment that his brothers be informed about what happens to those who simply ignore the poor man in need. Jesus takes up this cry for help as a warning to help us return to the right path. Having reflected on the nature of love and its meaning in biblical faith, we are left with two questions concerning our own attitude: can we love God without seeing him? In the gradual unfolding of this encounter, it is clearly revealed that love is not merely a sentiment. Sentiments come and go. A sentiment can be a marvellous first spark, but it is not the fullness of love. Earlier we spoke of the process of purification and maturation by which eros comes fully into its own, becomes love in the full meaning of the word. It is characteristic of mature love that it calls into play all man's potentialities; it engages the whole man, so to speak. Contact with the visible manifestations of God's love can awaken within us a feeling of joy born of the experience of being loved. But this encounter also engages our will and our intellect. Acknowledgment of the living God is one path towards love, Love of neighbour is thus shown to be possible in the way proclaimed by the Bible, by Jesus. It consists in the very fact that, in God and with God, I love even the person whom I do not like or even know. This can only take place on the basis of an intimate encounter with God, an encounter which has become a communion of will, even affecting my feelings. Then I learn to look on this other person not simply with my eyes and my feelings, but from the perspective of Jesus Christ. His friend is my friend. Going beyond exterior appearances, I perceive in others an interior desire for a sign of love, of concern. This I can offer them not only through the organizations intended for such purposes, accepting it perhaps as a political necessity. Seeing with the eyes of Christ, I can give to others much more than their outward necessities";

const model = generateModel(bill_of_rights + " " + para86 + " " + piusx11 + piusx11_2 + b16);
const output_text = generateText("selfishness", model);

document.body.innerHTML = output_text;
// console.log(output_text);

function generateModel(input_text) {
    const words = input_text.split(" ");
    const model = {};

    // loop through all the words except the last one.
    for (let i = 0; i < words.length - 1; i++) {
        const target_word = words[i];
        const next_word = words[i + 1];

        // if the model doesn't contain the target word, add it.
        if (!model[target_word]) {
            model[target_word] = [];
        }

        // add the next word to the possibilities for target_word
        model[target_word].push(next_word);
    }

    return model;
}


function generateText(first_word, model) {
    // start with the word passed in
    let output_text = first_word;
    let current_word = first_word;
    for (let i = 0; i < 120; i++) {
        // choose the next word by sampling from options in the model
        current_word = sample(model[current_word]);

        // append word to output
        output_text += " ";
        output_text += current_word;

        // if we get to a word that ends with "." we are done.
        const last_character = current_word.substr(current_word.length - 1);
        if (last_character === ".") {
            break;
        }
    }
    return output_text;
}

function sample(array) {
    const index = Math.floor(Math.random() * array.length);
    return array[index];
}

